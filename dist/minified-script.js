let pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=150",n=document.querySelector(".modal");function o(t){e.push(t)}function i(){document.querySelector("#loader").style.visibility="visible"}function a(){document.querySelector("#loader").style.display="none"}function s(e){i();let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){a(),e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types}).catch(function(e){a(),console.error(e)})}function l(){n.classList.remove("is-visible")}function r(e){s(e).then(function(){!function(e){let t=$(".modal-body");console.log(t);let o=$(".modal-title"),i=$(".modal-header");t.empty(),o.empty(),i.empty();let a=$("<h1>"+e.name.toUpperCase()+"</h1>"),s=$('<img class="modal-img" style="width:50%">');s.attr("src",e.imageUrl);let l=$("<p>Height: "+e.height+"</p>");i.append(a),o.append(a),t.append(s),t.append(l),n.classList.add("is-visible")}(e)})}return window.addEventListener("keydown",e=>{"Escape"===e.key&&n.classList.contains("is-visible")&&l()}),n.addEventListener("click",e=>{e.target===n&&l()}),{add:o,getAll:function(){return e},addListItem:function(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("li"),o=document.createElement("button");o.innerText=e.name.toUpperCase(),o.classList.add("btn"),o.classList.add("btn-primary"),o.setAttribute("data-target","#pokemonModal"),o.setAttribute("data-toggle","modal"),n.appendChild(o),t.appendChild(n),o.addEventListener("click",function(){r(e)})},loadList:function(){return i(),fetch(t).then(function(e){return e.json()}).then(function(e){a(),e.results.forEach(function(e){o({name:e.name,detailsUrl:e.url})})}).catch(function(e){a(),console.error(e)})},loadDetails:s,showDetails:r,showLoadingMessage:i,hideLoadingMessage:a,hideModal:l}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});let searchPokemonList=document.querySelector(".pokemon-list"),searchBar=document.forms.filter.querySelector("input");searchBar.addEventListener("keyup",function(e){let t=e.target.value.toLowerCase(),n=searchPokemonList.getElementsByTagName("li");Array.from(n).forEach(function(e){-1!=e.firstElementChild.textContent.toLowerCase().indexOf(t)?e.style.display="block":e.style.display="none"})});